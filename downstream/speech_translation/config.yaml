runner:
  total_steps: 2000000
  gradient_clipping: 1
  gradient_accumulate_steps: 4

  log_step: 100
  # eval_step: 2000
  eval_step: 200
  save_step: 200
  max_keep: 1
  eval_dataloaders:
    - dev
    - test

optimizer:
  name: AdamW
  lr: 2.0e-4

# comment the whole scheduler config block
# to disable learning rate scheduling
scheduler:
  name: linear_schedule_with_warmup
  num_warmup_steps: 1400

downstream_expert:

  max_length: 64

  datarc:
    num_workers: 8
    train_batch_size: 16
    eval_batch_size: 16
    clip_dir: /hdd/covost/cv-corpus-6.1-2020-12-11/zh-CN/clips/
    train_tsv: /hdd/covost/tsvs/covost_v2.zh-CN_en.train.tsv
    valid_tsv: /hdd/covost/tsvs/covost_v2.zh-CN_en.dev.tsv
    test_tsv: /hdd/covost/tsvs/covost_v2.zh-CN_en.test.tsv

  modelrc:
    d_model: 256
    nhead: 4
    num_encoder_layers: 0
    num_decoder_layers: 6
    dim_feedforward: 2048

  tokenizerrc:
    model_path: /home/sean/Desktop/s3prl/downstream/speech_translation/sp_1000.model